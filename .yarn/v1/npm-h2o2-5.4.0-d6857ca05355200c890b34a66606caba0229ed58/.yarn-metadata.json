{
  "manifest": {
    "name": "h2o2",
    "description": "Proxy handler plugin for hapi.js",
    "version": "5.4.0",
    "repository": {
      "type": "git",
      "url": "git://github.com/hapijs/h2o2"
    },
    "main": "lib/index.js",
    "keywords": [
      "HTTP",
      "proxy",
      "handler",
      "hapi",
      "plugin"
    ],
    "engines": {
      "node": ">=4.0.0"
    },
    "dependencies": {
      "boom": "3.X.X",
      "hoek": "4.X.X",
      "joi": "9.X.X",
      "wreck": "9.X.X"
    },
    "devDependencies": {
      "code": "3.X.X",
      "hapi": "14.X.X",
      "inert": "4.X.X",
      "lab": "11.X.X"
    },
    "scripts": {
      "test": "lab -a code -t 100 -L",
      "test-cov-html": "lab -a code -r html -o coverage.html"
    },
    "license": "BSD-3-Clause",
    "_registry": "npm",
    "_loc": "/Users/mahdi.azarboon/Documents/dev-unsynced/optimization-practice/.yarn/v1/npm-h2o2-5.4.0-d6857ca05355200c890b34a66606caba0229ed58/package.json",
    "readmeFilename": "README.md",
    "readme": "#h2o2\n\nProxy handler plugin for hapi.js.\n\n[![NPM](https://nodei.co/npm/h2o2.png?downloads=true&stars=true)](https://nodei.co/npm/h2o2/)\n\n[![Build Status](https://secure.travis-ci.org/hapijs/h2o2.png)](http://travis-ci.org/hapijs/h2o2)\n\nLead Maintainer - [Oscar A. Funes Martinez](https://github.com/osukaa)\n\n## Introduction\n\n**h2o2** is a hapi plugin that adds proxying functionality.\n\n## Manual loading\n\nStarting on version 9, `hapi` does not load the `h2o2` automatically. To add `h2o2` to your server, you should register it normally.\n\n```javascript\nconst Hapi = require('hapi');\nconst server = new Hapi.Server();\n\nserver.register({\n    register: require('h2o2')\n}, function (err) {\n\n    if (err) {\n        console.log('Failed to load h2o2');\n    }\n\n    server.start(function (err) {\n\n        console.log('Server started at: ' + server.info.uri);\n    });\n});\n```\n_**NOTE**: h2o2 is included with and loaded by default in Hapi < 9.0._\n\n## Options\n\nThe proxy handler object has the following properties:\n\n* `host` - upstream service host to proxy requests to. It will have the same path as the client request.\n* `port` - upstream service port.\n* `protocol` - protocol to use when making the request to the proxied host:\n    * 'http'\n    * 'https'\n* `uri` - absolute URI used instead of host, port, protocol, path, and query. Cannot be used with `host`, `port`, `protocol`, or `mapUri`.\n* `passThrough` - if set to `true`, it forwards the headers from the client to the upstream service, headers sent from the upstream service will also be forwarded to the client. Defaults to `false`.\n* `localStatePassThrough` - if set to`false`, any locally defined state is removed from incoming requests before being sent to the upstream service. This value can be overridden on a per state basis via the `server.state()``passThrough` option. Defaults to `false`\n* `acceptEncoding` - if set to `false`, does not pass-through the 'Accept-Encoding' HTTP header which is useful for the `onResponse` post-processing to avoid receiving an encoded response. Can only be used together with `passThrough`. Defaults to `true` (passing header).\n* `rejectUnauthorized` - sets the `rejectUnauthorized` property on the https [agent](http://nodejs.org/api/https.html#https_https_request_options_callback) making the request. This value is only used when the proxied server uses TLS/SSL. If set it will override the node.js `rejectUnauthorized` property. If `false` then ssl errors will be ignored. When `true` the server certificate is verified and an 500 response will be sent when verification fails. This shouldn't be used alongside the `agent` setting as the `agent` will be used instead. Defaults to the https agent default value of `true`.\n* `xforward` - if set to `true`, sets the 'X-Forwarded-For', 'X-Forwarded-Port', 'X-Forwarded-Proto', 'X-Forwarded-Host' headers when making a request to the proxied upstream endpoint. Defaults to `false`.\n* `redirects` - the maximum number of HTTP redirections allowed to be followed automatically by the handler. Set to `false` or `0` to disable all redirections (the response will contain the redirection received from the upstream service). If redirections are enabled, no redirections (301, 302, 307, 308) will be passed along to the client, and reaching the maximum allowed redirections will return an error response. Defaults to `false`.\n* `timeout` - number of milliseconds before aborting the upstream request. Defaults to `180000` (3 minutes).\n* `mapUri` - a function used to map the request URI to the proxied URI. Cannot be used together with `host`, `port`, `protocol`, or `uri`. The function signature is `function (request, callback)` where:\n    * `request` - is the incoming [request object](http://hapijs.com/api#request-object).\n    * `callback` - is `function (err, uri, headers)` where:\n        * `err` - internal error condition.\n        * `uri` - the absolute proxy URI.\n        * `headers` - optional object where each key is an HTTP request header and the value is the header content.\n* `onResponse` - a custom function for processing the response from the upstream service before sending to the client. Useful for custom error handling of responses from the proxied endpoint or other payload manipulation. Function signature is `function (err, res, request, reply, settings, ttl)` where:\n    * `err` - internal or upstream error returned from attempting to contact the upstream proxy.\n    * `res` - the node response object received from the upstream service. `res` is a readable stream (use the [wreck](https://github.com/hapijs/wreck) module `read` method to easily convert it to a Buffer or string).\n    * `request` - is the incoming [request object](http://hapijs.com/api#request-object).\n    * `reply` - the [reply interface](http://hapijs.com/api#reply-interface) function.\n    * `settings` - the proxy handler configuration.\n    * `ttl` - the upstream TTL in milliseconds if `proxy.ttl` it set to `'upstream'` and the upstream response included a valid 'Cache-Control' header with 'max-age'.\n* `ttl` - if set to `'upstream'`, applies the upstream response caching policy to the response using the `response.ttl()` method (or passed as an argument to the `onResponse` method if provided).\n* `agent` - a node [http(s) agent](http://nodejs.org/api/http.html#http_class_http_agent) to be used for connections to upstream server.\n* `maxSockets` - sets the maximum number of sockets available per outgoing proxy host connection. `false` means use the **wreck** module default value (`Infinity`). Does not affect non-proxy outgoing client connections. Defaults to `Infinity`.\n\n## Usage\n\nAs one of the handlers for hapi, it is used through the route configuration object.\n\n### `reply.proxy(options)`\n\nProxies the request to an upstream endpoint where:\n- `options` - an object including the same keys and restrictions defined by the\n [route `proxy` handler options](#options).\n\nNo return value.\n\nThe [response flow control rules](http://hapijs.com/api#flow-control) **do not** apply.\n\n```js\nconst handler = function (request, reply) {\n\n    return reply.proxy({ host: 'example.com', port: 80, protocol: 'http' });\n};\n```\n\n### Using the `host`, `port`, `protocol` options\n\nSetting these options will send the request to certain route to a specific upstream service with the same path as the original request. Cannot be used with `uri`, `mapUri`.\n\n```javascript\nserver.route({\n    method: 'GET',\n    path: '/',\n    handler: {\n        proxy: {\n            host: '10.33.33.1',\n            port: '443',\n            protocol: 'https'\n        }\n    }\n});\n```\n\n### Using the `uri` option\n\nSetting this option will send the request to an absolute URI instead of the incoming host, port, protocol, path and query. Cannot be used with `host`, `port`, `protocol`, `mapUri`.\n\n```javascript\nserver.route({\n    method: 'GET',\n    path: '/',\n    handler: {\n        proxy: {\n            uri: 'https://some.upstream.service.com/that/has?what=you&want=todo'\n        }\n    }\n});\n```\n### Custom `uri` template values\n    \nWhen using the `uri` option, there are optional **default** template values that can be injected from the incoming `request`:\n\n* `{protocol}`\n* `{host}`\n* `{port}`\n* `{path}`\n    \n```javascript\nserver.route({\n    method: 'GET',\n    path: '/foo',\n    handler: {\n        proxy: {\n            uri: '{protocol}://{host}:{port}/go/to/{path}'\n        }\n    }\n});\n```\nRequests to `http://127.0.0.1:8080/foo/` would be proxied to an upstream destination of `http://127.0.0.1:8080/go/to/foo`\n\n\nAdditionally, you can capture request.params values and inject them into the upstream uri value using a similar replacment strategy:\n```javascript\nserver.route({\n    method: 'GET',\n    path: '/foo/{bar}',\n    handler: {\n        proxy: {\n            uri: 'https://some.upstream.service.com/some/path/to/{bar}'\n        }\n    }\n});\n```\n**Note** The default variables of `{protocol}`, `{host}`, `{port}`, `{path}` take precedence - it's best to treat those as reserved when naming your own `request.params`.\n\n    \n### Using the `mapUri` and `onResponse` options\n\nSetting both options with custom functions will allow you to map the original request to an upstream service and to processing the response from the upstream service, before sending it to the client. Cannot be used together with `host`, `port`, `protocol`, or `uri`.\n\n```javascript\nserver.route({\n    method: 'GET',\n    path: '/',\n    handler: {\n        proxy: {\n            mapUri: function (request, callback) {\n\n                console.log('doing some aditional stuff before redirecting');\n                callback(null, 'https://some.upstream.service.com/');\n            },\n            onResponse: function (err, res, request, reply, settings, ttl) {\n\n                console.log('receiving the response from the upstream.');\n                Wreck.read(res, { json: true }, function (err, payload) {\n\n                    console.log('some payload manipulation if you want to.')\n                    reply(payload).headers = res.headers;\n                });\n            }\n        }\n    }\n});\n\n```\n",
    "licenseText": "Copyright (c) 2012-2014, Walmart and other contributors.\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n    * Redistributions in binary form must reproduce the above copyright\n      notice, this list of conditions and the following disclaimer in the\n      documentation and/or other materials provided with the distribution.\n    * The names of any contributors may not be used to endorse or promote\n      products derived from this software without specific prior written\n      permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDERS AND CONTRIBUTORS BE LIABLE FOR ANY\nDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\nON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n                                  *   *   *\n\nThe complete list of contributors can be found at: https://github.com/hapijs/h2o2/graphs/contributors\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/h2o2/-/h2o2-5.4.0.tgz#d6857ca05355200c890b34a66606caba0229ed58",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/h2o2/-/h2o2-5.4.0.tgz",
    "hash": "d6857ca05355200c890b34a66606caba0229ed58",
    "registry": "npm",
    "packageName": "h2o2"
  },
  "registry": "npm",
  "hash": "d6857ca05355200c890b34a66606caba0229ed58"
}